<!DOCTYPE html>
<html>
<head>
	<title>Puissance 4</title>
	<style>
		body{margin:0}
		canvas{background:#333}
	</style>
</head>
<body onload="startGame()">
	<script>
		var canvas, ctx, player = 1, board = [], gameover = false;
		const ROWS = 6, COLS = 7, CELL_SIZE = 80;

		function startGame(){
			canvas = document.createElement('canvas');
			canvas.width = COLS * CELL_SIZE;
			canvas.height = (ROWS+1) * CELL_SIZE;
			canvas.style.margin = 'auto';
			canvas.style.display = 'block';
			document.body.appendChild(canvas);
			ctx = canvas.getContext('2d');
			for(var r=0; r<ROWS; r++) board[r] = Array(COLS).fill(0);
			canvas.addEventListener('mousemove', handleMousemove);
			canvas.addEventListener('click', handleClick);
		}

		function drawBoard(){
			ctx.clearRect(0,0,canvas.width,canvas.height);
			ctx.font = 'bold 60px sans-serif';
			ctx.fillStyle = '#fff';
			ctx.fillText('Puissance 4', 10, 60);
			ctx.font = 'bold 30px sans-serif';
			for(var r=0; r<ROWS; r++){
				for(var c=0; c<COLS; c++){
					ctx.beginPath();
					ctx.arc(c*CELL_SIZE+CELL_SIZE/2, r*CELL_SIZE+CELL_SIZE*1.5, CELL_SIZE/2.5, 0, Math.PI*2);
					ctx.closePath();
					ctx.fillStyle = board[r][c] == 0 ? '#fff' : board[r][c] == 1 ? '#f00' : '#ff0';
					ctx.fill();
				}
			}
			if(gameover){
				ctx.fillStyle = 'rgba(0,0,0,0.8)';
				ctx.fillRect(0,0,canvas.width,canvas.height);
				ctx.fillStyle = '#fff';
				ctx.font = 'bold 50px sans-serif';
				ctx.fillText(`Joueur ${player == 1 ? 2 : 1} gagne!`, 10, canvas.height/2);
			}
		}

		function handleMousemove(e){
			var c = Math.floor(e.offsetX / CELL_SIZE);
			ctx.clearRect(0,0,canvas.width,canvas.height);
			drawBoard();
			if(!gameover){
				ctx.beginPath();
				ctx.arc(c*CELL_SIZE+CELL_SIZE/2, CELL_SIZE/2, CELL_SIZE/2.5, 0, Math.PI*2);
				ctx.closePath();
				ctx.fillStyle = player == 1 ? '#f00' : '#ff0';
				ctx.fill();
			}
		}

		function handleClick(e){
			if(gameover) return;
			var c = Math.floor(e.offsetX / CELL_SIZE);
			for(var r=ROWS-1; r>=0; r--){
				if(board[r][c] == 0){
					board[r][c] = player;
					drawBoard();
					checkForWin();
					player = player == 1 ? 2 : 1;
					return;
				}
			}
		}

		function checkForWin(){
			var winner = 0;
			// VÃ©rification des colonnes
			for(var c=0; c<COLS; c++){
			
