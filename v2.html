<!DOCTYPE html>
<html>
<head>
  <title>üî¥ Puissance 4 ‚ò¢Ô∏è</title>
  <style>
    body {
      background-color: rgb(35, 34, 34);
      margin: 0;
      padding: 0;
      background-image: url("https://www.massivmoebel24.fr/images/product_images/popup_images/05-900-610-9000-1.jpg");
      background-size: cover
    }
    #board {
      width: 700px;
      height: 600px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-100%, -50%);
      border: 0.5rem solid white;
      background-color:#1f39ff;
    }
    .circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin: 30px;
      position: absolute;
      cursor: pointer;
      background-color: #bbbbbb
    }
    .joueur1 {
      background: center / contain no-repeat url("https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/1200px-ChatGPT_logo.svg.png");
      
    }
    .joueur2 {
      background: center / contain no-repeat url("https://freelogopng.com/images/all_img/1681038800chatgpt-logo-black.png");
    }
    .joueur3 {
      background-color: #0b8300;
    }
    .score {
      color: rgb(115, 25, 151)
    }
    .winner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 540%;
      color: rgb(0, 0, 0);
    }
    .player1 {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(7%, -85%);
      font-size: 550%;
      font-family: 'Courier New', monospace;
      color: #9b0000;
    }
    .player2{
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(7%, -10%);
      font-size: 550%;
      font-family: 'Courier New', monospace;
      color: white;
    }
    .icone {
      width:100px;
      height:100px;
      border-radius:100px;
    }
    .player_item_container {
      display: flex;
      align-items: center;
    }
    .your_turn {
      background: center / contain no-repeat url("https://imgur.com/3VDFazZ.png");
      width:50px;
      height:50px;
    }
    .not_your_turn {
      background: center / contain no-repeat url("https://imgur.com/1Xzubd6.png");
      width:50px;
      height:50px;
    }
  </style>
</head>
<body>
  <div class="player1">
    <div class="player_item_container">
      <div class="your_turn" id="your_turn"></div>
      <pre id="j1">  Joueur 1  </pre>
      <div class="joueur1 icone"></div>
      <pre>  </pre>
      <div class="score">
        <pre id="score1">0</pre>
      </div>
    </div>
  </div>
  <div class="player2">
    <div class="player_item_container">
      <div class="not_your_turn" id="not_your_turn"></div>
      <pre id="j2">  Joueur 2  </pre>
      <div class="joueur2 icone"></div>
      <pre>  </pre>
      <div class="score">
        <pre id="score2">0</pre>
      </div>
    </div>
  </div>

  <div id="board"></div>


  <script>
  
    var board = [];
    var current_player = 1;
    var circle_radius = 40;
    var circle_padding = 10;
    var board_rows = 6;
    var board_columns = 7;
    var game_over = false;
    var colour = ['joueur 1', 'joueur 2', 'joueur 3']
    var score = [0, 0, 0]
    var perdant = 0
    var j1 = document.getElementById("j1");
    var j2 = document.getElementById("j2");

    // Cr√©er les cercles pour le plateau de jeu
    function create_circles() {
      var board_div = document.getElementById("board");
      for (var i = 0; i < board_rows; i++) {
        board[i] = [];
        for (var j = 0; j < board_columns; j++) {
          var circle_div = document.createElement("div");
          circle_div.className = "circle";
          circle_div.style.top = i * (circle_radius * 2 + circle_padding) + circle_padding + "px";
          circle_div.style.left = j * (circle_radius * 2 + circle_padding) + circle_padding + "px";
          circle_div.setAttribute("data-row", i);
          circle_div.setAttribute("data-col", j);
          circle_div.onclick = function() {
            if (!game_over) {
              var row = this.getAttribute("data-row");
              var col = this.getAttribute("data-col");
              turn();
              add_token(row, col);
            } else {
              game_over = false;
              winner_div = document.getElementById("victoryText")
              winner_div.remove();
              board_div.innerHTML=""
              create_circles();
            }
          }
          board_div.appendChild(circle_div);
          board[i][j] = 0;
        }
      }
    }

    // Ajouter un jeton sur le plateau de jeu
    function add_token(row, col) {
      for (var i = board_rows - 1; i >= 0; i--) {
        if (board[i][col] === 0) {
          board[i][col] = current_player;
          var circle_div = document.querySelector('[data-row="' + i + '"][data-col="' + col + '"]');
          circle_div.classList.add(current_player === 1 ? "joueur1" : "joueur2");
          if (check_win(i, col)) {
            score[current_player-1] += 1;
            const score1 = document.getElementById("score1");
            score1.innerHTML = score[0];
            const score2 = document.getElementById("score2");
            score2.innerHTML = score[1];
            game_over = true;
            victory();
            if (current_player === 1) current_player = 2
            else current_player = 1
          } else {
            current_player = current_player === 1 ? 2 : 1;
          }
          break;
        }
      }
    }

    // Affiche l'√©cran de victoire
    function victory() {
      var winner_div = document.createElement("div");
      winner_div.setAttribute("id", "victoryText")
      winner_div.className = "winner";
      winner_div.innerHTML = "Le " + colour[current_player-1] + " a gagn√© !";
      document.body.appendChild(winner_div);
    }

    // Change la couleur de l'utilisateur qui doit jouer
    function change_colour(id, colour) {
      document.getElementById(id).style.color = colour;
    }

    function turn() {
      const yourTurn = document.getElementById("your_turn");
      const notYourTurn = document.getElementById("not_your_turn");
      if (current_player === 1) {
        change_colour('j1', '#ffffff');
        change_colour('j2', '#9b0000');
        yourTurn.style.backgroundImage = "url('https://imgur.com/1Xzubd6.png')";
        notYourTurn.style.backgroundImage = "url('https://imgur.com/3VDFazZ.png')";
      } else {
        change_colour('j1', '#9b0000');
        change_colour('j2', '#ffffff');
        yourTurn.style.backgroundImage = "url('https://imgur.com/3VDFazZ.png')";
        notYourTurn.style.backgroundImage = "url('https://imgur.com/1Xzubd6.png')";
      }
    }

    // V√©rifier si un joueur a gagn√©
    function check_win(row, col) {
      var player = board[row][col];
      // V√©rifier les 4 jetons align√©s horizontalement
      var count = 0;
      for (var i = col - 3; i <= col + 3; i++) {
        if (i < 0 || i >= board_columns) {
          continue;
        }
        if (board[row][i] === player) {
          count++;
          if (count === 4) {
            return true;
          }
        } else {
          count = 0;
        }
      }

      // V√©rifier les 4 jetons align√©s verticalement
      count = 0;
      for (var i = row - 3; i <= row + 3; i++) {
        if (i < 0 || i >= board_rows) {
          continue;
        }
        if (board[i][col] === player) {
          count++;
          if (count === 4) {
            return true;
          }
        } else {
          count = 0;
        }
      }

      // V√©rifier les 4 jetons align√©s en diagonale de gauche √† droite
      count = 0;
      for (var i = -3; i <= 3; i++) {
        var r = row - i;
        var c = col - i;
        if (r < 0 || r >= board_rows || c < 0 || c >= board_columns) {
          continue;
        }
        if (board[r][c] === player) {
          count++;
          if (count === 4) {
            return true;
          }
        } else {
          count = 0;
        }
      }

      // V√©rifier les 4 jetons align√©s en diagonale de droite √† gauche
      count = 0;
      for (var i = -3; i <= 3; i++) {
        var r = row + i;
        var c = col - i;
        if (r < 0 || r >= board_rows || c < 0 || c >= board_columns) {
          continue;
        }
        if (board[r][c] === player) {
          count++;
          if (count === 4) {
            return true;
          }
        } else {
          count = 0;
        }
      }

      return false;
    }
    create_circles();
  </script>
</body>
</html>